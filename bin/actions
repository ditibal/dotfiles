#!/bin/python

from rofi import Rofi
import os


def awesome_restart():
    os.system("awesome-client 'awesome.restart()'")


def awesome_quit():
    os.system("awesome-client 'awesome.quit()'")


def edit_hosts():
    os.system("alacritty -e /bin/nvim /etc/hosts")


def help():
    os.system("alacritty -e frogmouth ~/dotfiles/cheatsheet.md")


def run_awesome_command(cmd):
    os.system("awesome-client \"" + cmd + "\"")


def switch_tag_group():
    options = [
        'Default',
        'Work',
        'Autoshina',
        'Shop',
    ]

    index, key = rofi.select('Group', options, rofi_args=['-i'])

    if index < 0 or index > len(options):
        return

    option = options[index].lower()

    run_awesome_command("require('lib.awful.tag').set_group('" + option + "')")


def suspend():
    os.system("systemctl suspend")


global_actions = [
    {
        'label': 'Restart Awesome',
        'name': 'awesome_restart',
        'action': awesome_restart,
    },
    {
        'label': 'Quit',
        'name': 'awesome_quit',
        'action': awesome_quit,
    },
    {
        'label': 'Edit hosts',
        'name': 'edit_hosts',
        'action': edit_hosts,
    },
    {
        'label': 'Suspend',
        'name': 'suspend',
        'action': suspend,
    },
    {
        'label': 'Help',
        'name': 'help',
        'action': help,
    },
    {
        'label': 'Switch tag group',
        'name': 'awesome_restart',
        'action': switch_tag_group,
    },
]


def run_action(actions):
    options = [action['label'] for action in actions]
    index, key = rofi.select('Run', options, rofi_args=['-i'])

    if 0 <= index < len(actions):
        obj = actions[index]
        action_func = obj['action']
        action_func()


rofi = Rofi()

run_action(global_actions)
